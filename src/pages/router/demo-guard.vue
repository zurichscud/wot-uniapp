<script setup lang="ts">
const router = useRouter()

function goBack() {
  router.back()
}

// æ¼”ç¤ºæƒé™æ‹¦æˆª
function handleBeforeEach() {
  router.push({
    name: 'demo-protected',
  })
}

// è·³è½¬åˆ°afterEachæ¼”ç¤ºé¡µé¢
function demoAfterEachPage() {
  router.push('/pages/router/demo-aftereach')
}
</script>

<template>
  <view class="bg-gray-100 py-3 dark:bg-[var(--wot-dark-background)]">
    <!-- å¤´éƒ¨ -->
    <view class="mx-3 mb-3">
      <view class="rounded-3 bg-white px-5 py-6 text-center dark:bg-[var(--wot-dark-background2)]">
        <view class="mb-3 text-8">
          ğŸ›¡ï¸
        </view>
        <view class="mb-2 text-5 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
          å¯¼èˆªå®ˆå«æ¼”ç¤º
        </view>
        <view class="text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
          æ¼”ç¤º beforeEach å’Œ afterEach å®ˆå«åŠŸèƒ½
        </view>
      </view>
    </view>

    <!-- å®ˆå«æ¼”ç¤º -->
    <demo-block title="å®ˆå«æ¼”ç¤º" transparent>
      <view class="space-y-3">
        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            å‰ç½®å¯¼èˆªå®ˆå«æ‹¦æˆª
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            è·³è½¬å‰äº¤äº’ï¼Œå¯ä»¥æ‹¦æˆªå¯¼èˆª
          </view>
          <wd-button type="error" block @click="handleBeforeEach">
            ğŸ“Š beforeEach æ¼”ç¤º
          </wd-button>
        </view>

        <view class="rounded-2 bg-white p-4 dark:bg-[var(--wot-dark-background2)]">
          <view class="mb-3 text-4 text-gray-800 font-bold dark:text-[var(--wot-dark-color)]">
            åç½®å¯¼èˆªé’©å­æ¼”ç¤º
          </view>
          <view class="mb-3 text-3.5 text-gray-600 dark:text-[var(--wot-dark-color2)]">
            è·³è½¬åˆ°ä¸“é—¨çš„ afterEach æ¼”ç¤ºé¡µé¢ï¼Œä½“éªŒé¡µé¢ç»Ÿè®¡ã€åŸ‹ç‚¹ä¸ŠæŠ¥ç­‰åŠŸèƒ½
          </view>
          <wd-button type="success" block @click="demoAfterEachPage">
            ğŸ“Š afterEach æ¼”ç¤º
          </wd-button>
        </view>
      </view>
    </demo-block>

    <!-- æ“ä½œæŒ‰é’® -->
    <demo-block title="å¯¼èˆª" transparent>
      <view class="px-3">
        <wd-button type="warning" block @click="goBack">
          è¿”å›ä¸Šä¸€é¡µ
        </wd-button>
      </view>
    </demo-block>
  </view>
</template>

<route lang="json">
{
  "name": "demo-guard",
  "style": {
    "navigationBarTitleText": "å¯¼èˆªå®ˆå«æ¼”ç¤º"
  }
}
</route>
